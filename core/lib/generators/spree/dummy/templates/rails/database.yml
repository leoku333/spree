<% if agent_number = ENV['TC_AGENT_NUMBER']
database_prefix = agent_number + '_'
end %>
<% db_password = ENV['DB_PASSWORD'] %>
<% db_username = ENV['DB_USERNAME'] %>
<% db_host = ENV['DB_HOST'] %>
postgres: &postgres
  adapter: postgresql
  <% unless db_username.blank? %>
  username: <%= db_username || 'postgres' %>
  <% end %>
  <% unless db_password.blank? %>
  password: <%= db_password %>
  <% end %>
  <% unless db_host.blank? %>
  host: <%= db_host %>
  <% end %>
  min_messages: warning

development:
  <<: *postgres
  database: <%= database_prefix %><%= options[:lib_name] %>_spree_development
test:
  <<: *postgres
  database: <%= database_prefix %><%= options[:lib_name] %>_spree_test
production:
  <<: *postgres
  database: <%= database_prefix %><%= options[:lib_name] %>_spree_production
